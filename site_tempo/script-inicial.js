function carregar(){var a=document.getElementById("msg"),b=document.getElementById("imagem"),c=new Date,d=c.getHours(),e=c.getMinutes();a.innerHTML=`Agora s찾o <strong>${d}</strong>:<strong>${e}</strong>.`,6<=d&&12>d?(b.src="sol_manha_rec.png",document.body.style.background="#bdd0de"):12<=d&&18>=d?(b.src="sol_tarde_rec.png",document.body.style.background="#cf7d6f"):(b.src="lua_rec.png",document.body.style.background="#193c58")}const api={key:"64ed82577ced7f69cb1687f0ce536131",base:"https://api.openweathermap.org/data/2.5/",lang:"pt_br",units:"metric"},city=document.querySelector(".city"),date=document.querySelector(".date"),container_img=document.querySelector(".container-img"),container_temp=document.querySelector(".container-temp"),temp_number=document.querySelector(".container-temp div"),temp_unit=document.querySelector(".container-temp span"),weather_t=document.querySelector(".weather"),search_input=document.querySelector(".form-control"),search_button=document.querySelector(".btn"),low_high=document.querySelector(".low-high");window.addEventListener("load",()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(function(a){console.log(a);let b=a.coords.latitude,c=a.coords.longitude;coordResults(b,c)},function(a){alert(`erro: ${a.message}`)}):alert("Este navegador n\xE3o suporta geolozalica\xE7\xE3o.")});function coordResults(a,b){fetch(`${api.base}weather?lat=${a}&lon=${b}&lang=${api.lang}&units=${api.units}&APPID=${api.key}`).then(a=>{if(!a.ok)throw new Error(`http error: status ${a.status}`);return a.json()}).catch(a=>{alert(a.message)}).then(a=>{displayResults(a)})}search_button.addEventListener("click",function(){searchResults(search_input.value)}),search_input.addEventListener("keypress",enter);function enter(a){key=a.keyCode,13===key&&searchResults(search_input.value)}function searchResults(a){fetch(`${api.base}weather?q=${a}&lang=${api.lang}&units=${api.units}&APPID=${api.key}`).then(a=>{if(!a.ok)throw new Error(`http error: status ${a.status}`);return a.json()}).catch(a=>{alert(a.message)}).then(a=>{displayResults(a)})}function displayResults(a){console.log(a),city.innerText=`${a.name}, ${a.sys.country}`;let b=new Date;date.innerText=dateBuilder(b);let c=a.weather[0].icon;container_img.innerHTML=`<img src="./icons/${c}.png">`;let d=`${Math.round(a.main.temp)}`;temp_number.innerHTML=d,temp_unit.innerHTML=`째c`,weather_tempo=a.weather[0].description,weather_t.innerText=capitalizeFirstLetter(weather_tempo),low_high.innerText=`${Math.round(a.main.temp_min)}째c / ${Math.round(a.main.temp_max)}째c`}function dateBuilder(a){let b=["Domingo","Segunda","Ter\xE7a","Quarta","Quinta","Sexta","S\xE1bado"][a.getDay()],c=a.getDate(),d=["Janeiro","Fevereiro","Mar\xE7o","Abril","Maio","Junho","Julio","Agosto","Setembro","Outubro","Novembro","Dezembro"][a.getMonth()],e=a.getFullYear();return`${b}, ${c} ${d} ${e}`}container_temp.addEventListener("click",changeTemp);function changeTemp(){if(temp_number_now=temp_number.innerHTML,"\xB0c"===temp_unit.innerHTML){let a=1.8*temp_number_now+32;temp_unit.innerHTML="\xB0f",temp_number.innerHTML=Math.round(a)}else{let a=(temp_number_now-32)/1.8;temp_unit.innerHTML="\xB0c",temp_number.innerHTML=Math.round(a)}}function capitalizeFirstLetter(a){return a.charAt(0).toUpperCase()+a.slice(1)}